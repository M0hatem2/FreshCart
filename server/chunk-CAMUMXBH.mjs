import './polyfills.server.mjs';
import{B as a,E as o,V as i,dc as n,uc as c}from"./chunk-DOZWV4GR.mjs";var s=class r{constructor(t,e){this.httpClient=t;this.authService=e}cartCounter=i(0);addToCart(t){return this.httpClient.post("https://ecommerce.routemisr.com/api/v1/cart",{productId:t})}updateCart(t,e){return this.httpClient.put("https://ecommerce.routemisr.com/api/v1/cart/"+t,{count:e})}loadCartCounter(){if(!this.authService.getTokenFromLocalStorage()){console.warn("No token found in localStorage");return}this.GetLoggedUserCart().subscribe({next:e=>{let m=e.numOfCartItems;this.cartCounter.set(m)},error:e=>{console.log("Error loading cart counter:",e)}})}GetLoggedUserCart(){return this.httpClient.get("https://ecommerce.routemisr.com/api/v1/cart/",{headers:{token:this.authService.getTokenFromLocalStorage()}})}RemoveSpecificCartItem(t){return this.httpClient.delete("https://ecommerce.routemisr.com/api/v1/cart/"+t)}ClearUserCart(){return this.httpClient.delete("https://ecommerce.routemisr.com/api/v1/cart")}static \u0275fac=function(e){return new(e||r)(o(n),o(c))};static \u0275prov=a({token:r,factory:r.\u0275fac,providedIn:"root"})};export{s as a};
