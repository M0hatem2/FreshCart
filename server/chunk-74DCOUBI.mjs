import './polyfills.server.mjs';
import{l as L,n as E,o as D}from"./chunk-5H7222TY.mjs";import{a as P}from"./chunk-CAMUMXBH.mjs";import{a as S,c as B,g as F,n as M}from"./chunk-TKKQOPVI.mjs";import{$a as x,Aa as g,Ea as C,F as s,Fa as _,Ga as h,Ha as i,Ia as a,L as p,M as u,Ma as v,Oa as T,Pa as c,Xa as b,_a as y,ab as w,ia as d,oa as m,ta as f}from"./chunk-DOZWV4GR.mjs";import"./chunk-X2SEQXRR.mjs";var V=(r,t)=>t._id;function I(r,t){if(r&1){let e=v();i(0,"app-product-cart",6),T("addToCart",function(l){p(e);let n=c(2);return u(n.addProductToCart(l))}),a()}if(r&2){let e=t.$implicit;g("product",e)}}function W(r,t){if(r&1&&_(0,I,1,1,"app-product-cart",5,V),r&2){let e=c();h(e.filteredProducts)}}function j(r,t){r&1&&(i(0,"div",4),b(1," No products available at the moment. "),a())}var N=class r{allProducts=[];isLoading=!1;searchTerm="";brandTerm="";productsService=s(E);cartService=s(P);toastr=s(L);ngOnInit(){this.getProducts()}get filteredProducts(){return this.allProducts.filter(t=>{let e=this.searchTerm?t.category?.name?.toLowerCase().includes(this.searchTerm.toLowerCase()):!0,o=this.brandTerm?t.brand?.name?.toLowerCase().includes(this.brandTerm.toLowerCase()):!0;return e&&o})}getProducts(){this.isLoading=!0,this.productsService.getProducts().subscribe({next:t=>{this.allProducts=t.data,this.isLoading=!1},error:t=>{console.error("Error loading products:",t),this.isLoading=!1}})}addProductToCart(t){this.cartService.addToCart(t).subscribe({next:e=>{this.toastr.success("Product added to cart successfully"),this.cartService.cartCounter.set(e.numOfCartItems)},error:e=>{console.error("Error adding product to cart:",e),this.toastr.error("Failed to add product to cart")}})}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=m({type:r,selectors:[["app-brand-list"]],decls:6,vars:2,consts:[[1,"w-full","p-4"],[1,"flex","flex-col","sm:flex-row","justify-center","items-center","gap-4","mb-6"],["type","text","placeholder","\u{1F3F7}\uFE0F Search for brand...",1,"w-full","sm:w-1/3","px-5","py-3","rounded-xl","text-gray-800","placeholder-gray-400","border","border-gray-200","shadow-sm","shadow-gray-300","focus:outline-none","focus:ring-2","focus:ring-fuchsia-500","transition",3,"ngModelChange","ngModel"],[1,"grid","sm:grid-cols-2","md:grid-cols-4","lg:grid-cols-6","gap-4"],[1,"col-span-full","text-center","text-gray-500","p-8"],[3,"product"],[3,"addToCart","product"]],template:function(e,o){e&1&&(i(0,"div",0)(1,"div",1)(2,"input",2),w("ngModelChange",function(n){return x(o.brandTerm,n)||(o.brandTerm=n),n}),a()(),i(3,"div",3),f(4,W,2,0)(5,j,2,0,"div",4),a()()),e&2&&(d(2),y("ngModel",o.brandTerm),d(2),C(o.allProducts.length>0?4:5))},dependencies:[D,M,S,B,F],encapsulation:2})};export{N as BrandListComponent};
