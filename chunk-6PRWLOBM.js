import{l as S,n as F,o as I}from"./chunk-CWIBLOD6.js";import{a as b}from"./chunk-573M3ZOE.js";import{a as D,c as M,g as L,n as E}from"./chunk-IEOCVV27.js";import{Da as _,Fa as v,Ga as d,I as c,M as p,N as u,Oa as T,Ra as x,Sa as P,Ta as w,ca as s,ia as m,na as g,ra as f,va as C,wa as y,xa as h,ya as a,za as n}from"./chunk-EFRFJ76O.js";var O=(r,e)=>e._id;function V(r,e){if(r&1){let t=_();a(0,"app-product-cart",6),v("addToCart",function(l){p(t);let i=d(2);return u(i.addProductToCart(l))}),n()}if(r&2){let t=e.$implicit;f("product",t)}}function W(r,e){if(r&1&&y(0,V,1,1,"app-product-cart",5,O),r&2){let t=d();h(t.filteredProducts)}}function j(r,e){r&1&&(a(0,"div",4),T(1," No products available at the moment. "),n())}var N=class r{allProducts=[];isLoading=!1;searchTerm;productsService=c(F);cartService=c(b);toastr=c(S);ngOnInit(){this.getProducts()}get filteredProducts(){if(!this.searchTerm||!this.searchTerm.trim())return this.allProducts;let e=this.searchTerm.toLowerCase();return this.allProducts.filter(t=>t.category.name?.toLowerCase().includes(e))}getProducts(){this.isLoading=!0,this.productsService.getProducts().subscribe({next:e=>{this.allProducts=e.data,this.isLoading=!1},error:e=>{console.error("Error loading products:",e),this.isLoading=!1}})}addProductToCart(e){this.cartService.addToCart(e).subscribe({next:t=>{this.toastr.success("Product added to cart successfully"),this.cartService.cartCounter.set(t.numOfCartItems)},error:t=>{console.error("Error adding product to cart:",t),this.toastr.error("Failed to add product to cart")}})}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=m({type:r,selectors:[["app-category"]],decls:6,vars:2,consts:[[1,"w-full","p-4"],[1,"flex","justify-center","mb-6"],["type","text","placeholder","\u{1F50D} Search for category...",1,"w-full","sm:w-2/3","lg:w-1/2","px-5","py-3","rounded-xl","text-gray-800","placeholder-gray-400","border","border-gray-200","shadow-sm","shadow-gray-300","focus:outline-none","focus:ring-2","focus:ring-fuchsia-500","transition",3,"ngModelChange","ngModel"],[1,"grid","sm:grid-cols-2","md:grid-cols-4","lg:grid-cols-6","gap-4"],[1,"col-span-full","text-center","text-gray-500","p-8"],[3,"product"],[3,"addToCart","product"]],template:function(t,o){t&1&&(a(0,"div",0)(1,"div",1)(2,"input",2),w("ngModelChange",function(i){return P(o.searchTerm,i)||(o.searchTerm=i),i}),n()(),a(3,"div",3),g(4,W,2,0)(5,j,2,0,"div",4),n()()),t&2&&(s(2),x("ngModel",o.searchTerm),s(2),C(o.allProducts.length>0?4:5))},dependencies:[I,E,D,M,L],encapsulation:2})};export{N as CategoryComponent};
