import{a as b}from"./chunk-573M3ZOE.js";import{$ as P,Aa as d,Da as I,Fa as l,Ga as u,I as f,Ib as j,M as g,N as x,O as w,Oa as a,P as E,Pa as S,Qa as p,S as y,Ya as k,ca as c,ia as C,na as _,nb as D,ob as L,ra as m,tb as Y,va as T,ya as r,za as o}from"./chunk-EFRFJ76O.js";var v=class i{product={};cartService=f(b);removeProduct=new y;updateProductQTY=new y;onRemoveItem(){this.removeProduct.emit(this.product.product._id)}onUpdateQTY(e){this.updateProductQTY.emit({id:this.product.product._id,count:e})}clearCart(){this.cartService.ClearUserCart().subscribe({next:e=>{console.log(e)},error:e=>{console.error("Error clearing cart:",e)}})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=C({type:i,selectors:[["app-cart-items"]],inputs:{product:"product"},outputs:{removeProduct:"removeProduct",updateProductQTY:"updateProductQTY"},decls:18,vars:5,consts:[[1,"grid","grid-cols-6","md:grid-cols-8","lg:grid-cols-12","gap-4","items-center","p-4","border-b","border-gray-400","w-full"],[1,"col-span-2","md:col-span-1"],[1,"w-full","rounded",3,"src","alt"],[1,"col-span-4","md:col-span-5","lg:col-span-8"],[1,"font-bold","text-base","md:text-lg"],[1,"text-main","block","text-sm","md:text-base"],[1,"text-red-500","hover:text-red-700","cursor-pointer","text-2xl",3,"click"],[1,"fas","fa-trash-can"],[1,"hidden","md:flex","md:col-span-1","justify-center","cursor-pointer"],[1,"col-span-6","md:col-span-1","flex","justify-center","md:justify-end","items-center","gap-2","mt-2","md:mt-0"],[1,"bg-green-500","hover:bg-green-600","cursor-pointer","text-white","font-bold","py-1","px-3","rounded-full","text-lg",3,"click"],[1,"text-xl","font-semibold","mx-2"],[1,"bg-red-500","hover:bg-red-700","cursor-pointer","text-white","font-bold","py-1","px-3","rounded-full","text-lg",3,"click"]],template:function(t,n){t&1&&(r(0,"div",0)(1,"div",1),d(2,"img",2),o(),r(3,"div",3)(4,"h4",4),a(5),o(),r(6,"span",5),a(7),o(),r(8,"button",6),l("click",function(){return n.onRemoveItem()}),d(9,"i",7),o()(),d(10,"div",8),r(11,"div",9)(12,"button",10),l("click",function(){return n.onUpdateQTY(n.product.count+1)}),a(13," + "),o(),r(14,"span",11),a(15),o(),r(16,"button",12),l("click",function(){return n.onUpdateQTY(n.product.count-1)}),a(17," - "),o()()()),t&2&&(c(2),m("src",n.product.product.imageCover,P)("alt",n.product.product.title),c(3),S(n.product.product.title),c(2),p(" Price: ",n.product.price," EGP "),c(8),S(n.product.count))},encapsulation:2})};var V=i=>["/user/checkout",i];function O(i,e){i&1&&(r(0,"div",10),w(),r(1,"svg",11),d(2,"path",12),o(),E(),r(3,"p",13),a(4,"Your cart is empty"),o(),r(5,"p",14),a(6,"Start adding some products to make it full!"),o(),r(7,"button",15),a(8," Browse Products "),o()())}function U(i,e){if(i&1){let t=I();r(0,"div",16)(1,"button",17),l("click",function(){g(t);let s=u(2);return x(s.clearCart())}),a(2," \u{1F9F9} Clear Cart "),o()()}}function N(i,e){if(i&1){let t=I();r(0,"div",18)(1,"app-cart-items",19),l("removeProduct",function(s){g(t);let h=u(2);return x(h.removeItemFromCart(s))})("updateProductQTY",function(s){g(t);let h=u(2);return x(h.updateQTY(s.id,s.count))}),o()()}if(i&2){let t=e.$implicit;c(),m("product",t)}}function G(i,e){if(i&1&&(r(0,"button",20),a(1),o()),i&2){let t=u(2);m("routerLink",k(2,V,t.cartItems.cartId)),c(),p(" \u{1F4B3} Checkout \u2013 ",t.cartItems.data.totalCartPrice," EGP ")}}function R(i,e){if(i&1&&(r(0,"section",0)(1,"h2",1),a(2,"\u{1F6D2} Shopping Cart"),o(),r(3,"p",2),a(4," \u{1F9FE} Total Cart Price: "),r(5,"span",3),a(6),o()(),_(7,O,9,0,"div",4)(8,U,3,0,"div",5)(9,N,2,1,"div",6),r(10,"div",7)(11,"button",8),a(12," \u{1F501} Continue Shopping "),o(),_(13,G,2,4,"button",9),o()()),i&2){let t=u();c(6),p("",t.cartItems.data.totalCartPrice," EGP"),c(),m("ngIf",t.cartItems.data.products.length===0),c(),m("ngIf",t.cartItems.data.products.length>0),c(),m("ngForOf",t.cartItems.data.products),c(4),m("ngIf",t.cartItems.data.products.length>0)}}var Q=class i{cartItems={};isLoading=!1;cartService=f(b);ngOnInit(){this.loadCart()}loadCart(){this.cartService.GetLoggedUserCart().subscribe({next:e=>{this.cartItems=e,this.isLoading=!0,this.cartService.cartCounter.set(e.numOfCartItems)},error:e=>{console.error("Error fetching cart items:",e)}})}removeItemFromCart(e){this.cartService.RemoveSpecificCartItem(e).subscribe({next:t=>{this.cartItems=t,this.cartService.cartCounter.set(t.numOfCartItems)},error:t=>{console.error("Error removing item from cart:",t)}})}updateQTY(e,t){this.cartService.updateCart(e,t).subscribe({next:n=>{this.cartItems=n,this.cartService.cartCounter.set(n.numOfCartItems)},error:n=>{console.error("Error updating quantity:",n)}})}clearCart(){this.cartService.ClearUserCart().subscribe({next:e=>{this.cartItems=e,this.cartService.cartCounter.set(0),this.loadCart()},error:e=>{console.error("Error clearing cart:",e)}})}getTotalPrice(){return this.cartItems?.data?.products?this.cartItems.data.products.reduce((e,t)=>e+t.price*t.count,0):0}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=C({type:i,selectors:[["app-cart-list"]],decls:1,vars:1,consts:[[1,"container","mx-auto","px-4","py-6"],[1,"text-3xl","font-bold","text-gray-800","mb-4"],[1,"text-main","font-semibold","text-lg","mb-6"],[1,"text-primary"],["class","flex flex-col items-center p-16 justify-center mt-10 bg-gray-50 rounded-lg shadow-inner text-gray-600",4,"ngIf"],["class","mb-4 text-right",4,"ngIf"],["class","mb-4",4,"ngFor","ngForOf"],[1,"flex","cursor-pointer","flex-col","md:flex-row","justify-between","items-center","gap-4","mt-8","p-4","bg-gray-100","rounded-lg","shadow-md"],["routerLink","/user/products",1,"w-full","cursor-pointer","md:w-auto","bg-blue-600","hover:bg-blue-700","text-white","font-semibold","py-2","px-6","rounded-full","transition","duration-300","flex","items-center","justify-center","gap-2"],["class","w-full cursor-pointer md:w-auto bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-6 rounded-full transition duration-300 flex items-center justify-center gap-2",3,"routerLink",4,"ngIf"],[1,"flex","flex-col","items-center","p-16","justify-center","mt-10","bg-gray-50","rounded-lg","shadow-inner","text-gray-600"],["fill","none","stroke","currentColor","stroke-width","2","viewBox","0 0 24 24",1,"w-14","h-14","mb-4","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","d","M3 3h2l.4 2M7 13h10l4-8H5.4M7 13l-1.35 2.7a1 1 0 00.9 1.5h12.2a1 1 0 00.9-1.5L17 13M7 13V6h11"],[1,"text-xl","font-semibold","mb-1"],[1,"text-sm","text-gray-500","mb-4"],["routerLink","/user/products",1,"bg-primary","text-white","px-5","py-2","rounded-full","hover:bg-primary/90","transition"],[1,"mb-4","text-right"],[1,"bg-red-500","cursor-pointer","hover:bg-red-600","text-white","font-medium","py-2","px-4","rounded-md","transition",3,"click"],[1,"mb-4"],[3,"removeProduct","updateProductQTY","product"],[1,"w-full","cursor-pointer","md:w-auto","bg-green-600","hover:bg-green-700","text-white","font-semibold","py-2","px-6","rounded-full","transition","duration-300","flex","items-center","justify-center","gap-2",3,"routerLink"]],template:function(t,n){t&1&&_(0,R,14,5,"section",0),t&2&&T(n.isLoading?0:-1)},dependencies:[v,Y,D,L,j],encapsulation:2})};export{Q as CartListComponent};
