import{l as F,n as V,o as q}from"./chunk-CWIBLOD6.js";import{a as W}from"./chunk-573M3ZOE.js";import{a as I,c as k,g as B,n as O}from"./chunk-IEOCVV27.js";import{Aa as P,Da as _,Fa as S,Ga as m,I as c,M as g,N as f,Oa as s,Pa as T,Ra as v,S as h,Sa as D,Ta as L,W as d,ab as E,ca as u,cb as M,ia as x,jb as N,la as C,ra as w,wa as b,xa as y,ya as i,za as n}from"./chunk-EFRFJ76O.js";var p=class r{transform(e,t=""){return e.filter(o=>o.title.toLowerCase().includes(t.toLowerCase())||o.description.toLowerCase().includes(t.toLowerCase()))}static \u0275fac=function(t){return new(t||r)};static \u0275pipe=C({name:"search",type:r,pure:!0})};var z=(r,e)=>e._id;function G(r,e){if(r&1){let t=_();i(0,"app-product-cart",8),S("addToCart",function(l){g(t);let a=m();return f(a.addProductToCart(l))}),n()}if(r&2){let t=e.$implicit;w("product",t)}}function H(r,e){if(r&1&&(i(0,"div",7),P(1,"i",9),s(2,' No products found matching "'),i(3,"span",10),s(4),n(),s(5,'" '),n()),r&2){let t=m();u(4),T(t.searchTerm)}}var j=class r{allProducts=[];cartData;ProductsService=c(V);cartService=c(W);toastr=c(F);searchTerm;counter=d(0);price=d(2);qty=d(10);totalPrice=N(()=>this.price()*this.qty());changeCounter(){this.qty.set(40),this.counter.update(e=>e+1)}showToastr(e){this.toastr.success(e,"",{timeOut:5e3,progressBar:!0,progressAnimation:"decreasing",closeButton:!0,positionClass:"toast-top-right"})}isNew(e){let t=new Date(e);return(new Date().getTime()-t.getTime())/(1e3*60*60*24)<=7}getProducts(){this.ProductsService.getProducts().subscribe({next:e=>{console.log(e.data),this.allProducts=e.data,console.log(e.data[0].category.name)}})}addProductToCart(e){this.cartService.addToCart(e).subscribe({next:t=>{this.cartData=t;let o=t.numOfCartItems;this.cartService.cartCounter.set(o),this.showToastr("Product added to cart!")},error:t=>{console.error(t)}})}ngOnInit(){this.getProducts()}userName="mohamed";gun=new h;gunFire(){this.gun.emit(this.userName)}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=x({type:r,selectors:[["app-product-list"]],outputs:{gun:"gun"},decls:11,vars:5,consts:[[1,"py-8","bg-gradient-to-br","min-h-screen"],[1,"container","mx-auto","px-4"],[1,"flex","justify-center","mb-8"],["type","text","placeholder","\u{1F50D} Search for products...",1,"w-full","shadow-sm","shadow-gray-300","sm:w-2/3","lg:w-1/2","px-5","py-3","rounded-xl","text-gray-800","placeholder-gray-400","border","border-gray-200","focus:outline-none","focus:ring-2","focus:ring-fuchsia-500","transition",3,"ngModelChange","ngModel"],[1,"text-center","bg-fuchsia-900","w-full","text-white","text-3xl","sm:text-4xl","font-extrabold","tracking-wide","mb-8","rounded-full","py-3","px-6","inline-block","shadow-md"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","lg:grid-cols-4","xl:grid-cols-6","gap-6"],[3,"product"],[1,"col-span-full","text-center","text-fuchsia-900","bg-white/10","backdrop-blur-sm","rounded-xl","py-10","px-6","text-xl","font-medium","border","border-fuchsia-900","border-dashed","shadow-inner"],[3,"addToCart","product"],[1,"fa-solid","fa-face-frown"],[1,"font-semibold"]],template:function(t,o){t&1&&(i(0,"section",0)(1,"div",1)(2,"div",2)(3,"input",3),L("ngModelChange",function(a){return D(o.searchTerm,a)||(o.searchTerm=a),a}),n()(),i(4,"h2",4),s(5," Popular Products "),n(),i(6,"div",5),b(7,G,1,1,"app-product-cart",6,z,!1,H,6,1,"div",7),E(10,"search"),n()()()),t&2&&(u(3),v("ngModel",o.searchTerm),u(4),y(M(10,2,o.allProducts,o.searchTerm)))},dependencies:[q,p,O,I,k,B],encapsulation:2})};export{j as a};
